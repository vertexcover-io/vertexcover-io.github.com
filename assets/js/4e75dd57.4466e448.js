"use strict";(self.webpackChunkblog_vertexcover=self.webpackChunkblog_vertexcover||[]).push([[326],{614:(e,t,i)=>{i.d(t,{A:()=>a});i(6540);var s=i(4848);function a({children:e}){return(0,s.jsxs)("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"8px",padding:"16px",margin:"20px 0",borderLeft:"4px solid #007bff"},children:[(0,s.jsx)("strong",{style:{color:"#007bff",fontSize:"14px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"TL;DR:"}),(0,s.jsx)("div",{style:{marginTop:"8px"},children:e})]})}},1927:(e,t,i)=>{i(6540),i(4848)},6358:(e,t,i)=>{i(6540),i(4848)},6648:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>m,contentTitle:()=>c,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>h});var s=i(8151),a=i(4848),r=i(8453),n=i(614),l=(i(6358),i(7010)),o=(i(1927),i(7742));const d={slug:"ml-infra-for-the-gpu-poor",title:"ML Infra design for the GPU Poor",description:"ML Infra design for the GPU Poor",date:new Date("2025-07-31T00:00:00.000Z"),tags:["infra"],draft:!1},c=void 0,m={authorsImageUrls:[]},h=[{value:"Taming the Beast: How to Design a Queueing System for GPU-Intensive Workloads",id:"taming-the-beast-how-to-design-a-queueing-system-for-gpu-intensive-workloads",level:2},{value:"The Counter-Intuitive Truth About Being Busy",id:"the-counter-intuitive-truth-about-being-busy",level:3},{value:"The Architect&#39;s Solution: From One Big Line to a Multi-Lane Highway",id:"the-architects-solution-from-one-big-line-to-a-multi-lane-highway",level:3},{value:"1. The Foundational Shift: The &quot;Video-Minute&quot; as the True Unit of Work",id:"1-the-foundational-shift-the-video-minute-as-the-true-unit-of-work",level:4},{value:"2. Architecture: The Two-Lane Highway",id:"2-architecture-the-two-lane-highway",level:4},{value:"3. Smart Scaling: Beyond Simple Queue Length",id:"3-smart-scaling-beyond-simple-queue-length",level:4},{value:"4. Predictability Through Pragmatism: Working backwards from limits",id:"4-predictability-through-pragmatism-working-backwards-from-limits",level:4},{value:"5. The SLAs: Per-Tenant Throttling and Dynamic ETAs",id:"5-the-slas-per-tenant-throttling-and-dynamic-etas",level:4}];function x(e){const t={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"taming-the-beast-how-to-design-a-queueing-system-for-gpu-intensive-workloads",children:"Taming the Beast: How to Design a Queueing System for GPU-Intensive Workloads"}),"\n",(0,a.jsx)(n.A,{children:(0,a.jsx)(t.p,{children:"When designing for scale, the limiting factor is the GPU availability. So all rate limits / queueing must be designed around GPU availability."})}),"\n","\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"A guide for the aspiring software engineer on managing demand when your most critical resource is scarce."})}),"\n",(0,a.jsx)(t.p,{children:"Imagine you're building a revolutionary video generation service. Your platform is a hit, but you have a problem\u2014a good problem, but a problem nonetheless. You have three types of customers, all knocking on your door at once:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"B2C Customers:"})," Individuals using your web app to create short, fun videos. They expect results in seconds."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"B2B Giants:"})," Large enterprise clients who want to process massive workloads of tens of thousands of videos via your API."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Here\u2019s the catch: the heart of your operation, the GPU, is a fixed and expensive resource. Unlike CPU and memory, which are elastic and can be scaled on demand, your GPU capacity is limited. One B2B giant's request could monopolize your entire system, leaving your B2C users staring at a loading spinner for hours."}),"\n",(0,a.jsxs)(t.p,{children:["How do you design a system that ingests all these requests, keeps every customer type happy, and doesn't crumble under the pressure of this GPU bottleneck? The answer lies in the mathematical study of waiting lines: ",(0,a.jsx)(t.strong,{children:"Queueing Theory"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"the-counter-intuitive-truth-about-being-busy",children:"The Counter-Intuitive Truth About Being Busy"}),"\n",(0,a.jsxs)(t.p,{children:["Before we design our system, we must understand a fundamental insight from queueing theory: ",(0,a.jsx)(t.strong,{children:"wait times skyrocket as utilization exceeds 80%"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"In simple terms, queueing theory uses a few key variables:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Arrival Rate (\u03bb - Lambda):"})," How quickly tasks enter the queue."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Service Rate (\u03bc - Mu):"})," How quickly a server can process tasks."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Utilization (\u03c1 - Rho):"})," How busy a server is (\u03bb/\u03bc)."]}),"\n"]}),"\n",(0,a.jsx)(l.A,{}),"\n",(0,a.jsx)(t.h3,{id:"the-architects-solution-from-one-big-line-to-a-multi-lane-highway",children:"The Architect's Solution: From One Big Line to a Multi-Lane Highway"}),"\n",(0,a.jsx)(t.h4,{id:"1-the-foundational-shift-the-video-minute-as-the-true-unit-of-work",children:'1. The Foundational Shift: The "Video-Minute" as the True Unit of Work'}),"\n",(0,a.jsx)(t.p,{children:'The system was re-architected around the concept of a "video-minute." Instead of measuring queue length by the number of jobs, it was measured by the total duration of all videos waiting to be processed. This immediately provided a far more accurate picture of the outstanding load on the GPU fleet.'}),"\n",(0,a.jsx)(t.h4,{id:"2-architecture-the-two-lane-highway",children:"2. Architecture: The Two-Lane Highway"}),"\n",(0,a.jsx)(t.p,{children:'The core idea of separating UI and batch users was validated and implemented.\nAction: Two completely parallel infrastructures were created, each with its own dedicated queue and GPU fleet. This prevented any possibility of a "noisy neighbor" from the batch API world affecting the premium UI user experience. The UI queue was fed by a small, reserved pool of GPUs, while the batch queue was serviced by an auto-scaling fleet.'}),"\n",(0,a.jsx)(t.h4,{id:"3-smart-scaling-beyond-simple-queue-length",children:"3. Smart Scaling: Beyond Simple Queue Length"}),"\n",(0,a.jsx)(o.A,{}),"\n",(0,a.jsx)(t.p,{children:"Yes, we should auto-scale the GPU, but how much? There are few places we can look for data to make informed choice."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Historical Learning: The scaling logic was made parametric to learn from historical provisioning times, helping it make smarter predictions about when to initiate scaling."}),"\n",(0,a.jsx)(t.li,{children:'Metric-Driven Scaling: The auto-scaler was triggered based on "video-minutes".'}),"\n",(0,a.jsxs)(t.li,{children:["Cold Start problem: There is 2-4 minute cold-start time for GPUs. So, provisioning a GPU only makes sense if the ",(0,a.jsx)(t.code,{children:"video-minutes"})," to be processed are ",(0,a.jsx)(t.code,{children:"X"})," times of cold start time. That way, frequent GPU provisioning does not lead inefficient compute. It's economically inefficient to provision a new GPU that takes 3 minutes to start, only to process a 2-minute video."]}),"\n"]}),"\n",(0,a.jsx)(t.h4,{id:"4-predictability-through-pragmatism-working-backwards-from-limits",children:"4. Predictability Through Pragmatism: Working backwards from limits"}),"\n",(0,a.jsx)(t.p,{children:"The team acknowledged a hard truth: their ability to autoscale was not infinite. Based on historical data and cloud provider limits, they identified a realistic maximum number of GPUs they could reliably provision.\nThe fixed maximum capacity (Max GPUs * video-minutes per GPU) became the system's total throughput budget. This budget was then divided among the maximum number of potential concurrent batch users.\nResult: This calculation yielded a crucial metric: the maximum video-minutes per minute that could be allocated to a single user. This became the foundation for providing realistic SLAs."}),"\n",(0,a.jsx)(t.h4,{id:"5-the-slas-per-tenant-throttling-and-dynamic-etas",children:"5. The SLAs: Per-Tenant Throttling and Dynamic ETAs"}),"\n",(0,a.jsx)(t.p,{children:"This per-user capacity allocation was not just a theoretical number; it was enforced at the ingestion layer.\nAction: A user-aware rate limiter was placed at the front of the batch queue. If a user was allocated a capacity of \"1 video-minute per minute\", this gatekeeper would only release that amount of work from that user's batch into the main queue each minute.\nAccurate SLAs: This system allowed for incredibly predictable SLAs. If a user with a 1 video-minute/minute capacity submitted a batch of 100 jobs totaling 200 video-minutes, the system could confidently return an ETA of ~200 minutes plus a safety buffer, because it knew exactly how fast that user's jobs would be fed to the processors."})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(x,{...e})}):x(e)}},7010:(e,t,i)=>{i.d(t,{A:()=>r});var s=i(6540),a=i(4848);const r=()=>{const[e,t]=(0,s.useState)(!1),[i,r]=(0,s.useState)(null),n=280,l=40,o=60,d=520-o-20,c=n-l-40;(0,s.useEffect)(()=>{const e=setTimeout(()=>t(!0),300);return()=>clearTimeout(e)},[]);const m=e=>o+e*d,h=e=>{const t=Math.max(1,Math.min(e,20));return l+c-(t-1)/19*c};return(0,a.jsxs)("div",{className:"w-full bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 p-4 md:p-8",children:[(0,a.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:(0,a.jsxs)("div",{className:"absolute -inset-10 opacity-10",children:[(0,a.jsx)("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl animate-pulse"}),(0,a.jsx)("div",{className:"absolute top-3/4 right-1/4 w-64 h-64 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl animate-pulse delay-1000"}),(0,a.jsx)("div",{className:"absolute bottom-1/4 left-1/2 w-64 h-64 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl animate-pulse delay-500"})]})}),(0,a.jsxs)("div",{className:"relative max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"backdrop-blur-xl bg-white bg-opacity-40 rounded-3xl border border-white border-opacity-30 shadow-2xl p-4 md:p-8 mb-6 md:mb-8 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-white opacity-30 via-transparent to-transparent opacity-50 rounded-3xl"}),(0,a.jsx)("h1",{className:"text-2xl md:text-4xl font-bold text-gray-800 mb-6 md:mb-8 text-center relative z-10",children:"Queue Wait Time vs. System Utilization"}),(0,a.jsx)("div",{className:"relative z-10 flex justify-center overflow-x-auto",children:(0,a.jsxs)("svg",{width:520,height:n,viewBox:"0 0 520 280",className:"min-w-[520px] md:min-w-0 w-full max-w-2xl",children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"curveGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#10b981"}),(0,a.jsx)("stop",{offset:"70%",stopColor:"#f59e0b"}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#ef4444"})]}),(0,a.jsxs)("filter",{id:"glow",children:[(0,a.jsx)("feGaussianBlur",{stdDeviation:"2.5",result:"coloredBlur"}),(0,a.jsxs)("feMerge",{children:[(0,a.jsx)("feMergeNode",{in:"coloredBlur"}),(0,a.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),[0,.2,.4,.6,.8,1].map(e=>(0,a.jsx)("line",{x1:m(e),y1:l,x2:m(e),y2:l+c,stroke:"rgba(156, 163, 175, 0.2)",strokeWidth:"1"},`v-${e}`)),[1,5,10,15,20].map(e=>(0,a.jsx)("line",{x1:o,y1:h(e),x2:o+d,y2:h(e),stroke:"rgba(156, 163, 175, 0.2)",strokeWidth:"1"},`h-${e}`)),(0,a.jsx)("path",{d:(()=>{let e="";for(let t=0;t<=100;t++){const i=t/100*.99,s=1/(1-i),a=m(i),r=h(s);e+=0===t?`M ${a} ${r}`:` L ${a} ${r}`}return e})(),fill:"none",stroke:"url(#curveGradient)",strokeWidth:"4",filter:"url(#glow)",style:{strokeDasharray:1e3,strokeDashoffset:e?0:1e3,transition:"stroke-dashoffset 2s ease-in-out"}}),[{utilization:0,waitTime:1,label:"0%",color:"#10b981"},{utilization:.2,waitTime:1.25,label:"20%",color:"#10b981"},{utilization:.5,waitTime:2,label:"50%",color:"#10b981"},{utilization:.8,waitTime:5,label:"80%",color:"#f59e0b"},{utilization:.95,waitTime:20,label:"95%",color:"#ef4444"}].map((e,t)=>{const s=(e=>{const t=1/(1-Math.min(e,.99));return{x:m(e),y:h(t)}})(e.utilization),n=i===t;return(0,a.jsxs)("g",{transform:`translate(${s.x}, ${s.y})`,children:[(0,a.jsx)("circle",{r:n?10:6,fill:e.color,stroke:"white",strokeWidth:"2",className:"cursor-pointer transition-all duration-300",onMouseEnter:()=>r(t),onMouseLeave:()=>r(null)}),(0,a.jsx)("text",{y:-18,fill:"#374151",textAnchor:"middle",className:"text-sm font-semibold pointer-events-none",children:e.label}),n&&(0,a.jsxs)("g",{className:"pointer-events-none",children:[(0,a.jsx)("rect",{x:"-40",y:"18",width:"80",height:"28",rx:"5",fill:"rgba(0,0,0,0.9)"}),(0,a.jsxs)("text",{x:"0",y:"37",fill:"white",textAnchor:"middle",className:"text-xs font-bold",children:["~",e.waitTime.toFixed(1),"x Wait"]})]})]},t)}),(0,a.jsx)("text",{x:o+d/2,y:275,fill:"#374151",textAnchor:"middle",className:"text-sm font-medium",children:"System Utilization (\u03c1)"}),(0,a.jsx)("text",{x:o-50,y:l+c/2,fill:"#374151",textAnchor:"middle",className:"text-sm font-medium",transform:`rotate(-90 ${o-50} ${l+c/2})`,children:"Avg. Wait Time"}),[1,5,10,15,20].map(e=>(0,a.jsxs)("text",{x:o-8,y:h(e)+4,fill:"#6b7280",textAnchor:"end",className:"text-xs",children:[e,"x"]},`label-y-${e}`)),[0,.2,.4,.6,.8,1].map(e=>(0,a.jsx)("text",{x:m(e),y:l+c+15,fill:"#6b7280",textAnchor:"middle",className:"text-xs",children:100*e+"%"},`label-x-${e}`))]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 backdrop-blur-xl bg-white bg-opacity-40 rounded-2xl border border-white border-opacity-30 shadow-xl p-4 md:p-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white opacity-20 via-transparent to-transparent opacity-30 rounded-2xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("h3",{className:"text-lg md:text-xl font-bold text-gray-800 mb-4",children:"Key Insight"}),(0,a.jsxs)("p",{className:"text-gray-700 mb-4 text-sm md:text-base",children:["As system load (utilization) nears its maximum capacity (100%), the time a new task has to wait in the queue increases ",(0,a.jsx)("span",{className:"text-red-600 font-bold",children:"exponentially"}),", not linearly."]}),(0,a.jsx)("div",{className:"space-y-2 md:space-y-3",children:[{level:"Safe Zone (Under 80%)",time:"Predictable & Fast",color:"bg-emerald-500"},{level:"Danger Zone (80-95%)",time:"Wait times skyrocket",color:"bg-amber-500"},{level:"Collapse (Above 95%)",time:"System becomes unstable",color:"bg-red-500"}].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 backdrop-blur-sm bg-white bg-opacity-30 rounded-lg border border-white border-opacity-20",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:`w-3 h-3 rounded-full ${e.color} mr-3`}),(0,a.jsx)("span",{className:"text-gray-800 text-sm md:text-base",children:e.level})]}),(0,a.jsx)("span",{className:"text-gray-600 font-medium text-sm md:text-base",children:e.time})]},t))})]})]}),(0,a.jsxs)("div",{className:"backdrop-blur-xl bg-white bg-opacity-40 rounded-2xl border border-white border-opacity-30 shadow-xl p-4 md:p-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tl from-blue-500 opacity-10 via-transparent to-transparent opacity-50 rounded-2xl"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-500/80 flex items-center justify-center mr-3 border-2 border-white/50",children:(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:"\ud83d\udca1"})}),(0,a.jsx)("h3",{className:"text-lg md:text-xl font-bold text-gray-800",children:"Design Rule"})]}),(0,a.jsxs)("p",{className:"text-gray-700 text-sm md:text-base",children:["To maintain a stable and predictable system, design your auto-scaling and rate-limiting to keep average utilization below the ",(0,a.jsx)("b",{className:"text-blue-700",children:'~80% "knee"'})," of the curve."]})]})]})]})]})]})}},7742:(e,t,i)=>{i.d(t,{A:()=>r});var s=i(6540),a=i(4848);const r=()=>{const[e,t]=(0,s.useState)(3),[i,r]=(0,s.useState)(8),n=300,l=40,o=60,d=520-o-20,c=n-l-50,m=20,h=e=>o+e/m*d,x=e=>l+c-e/20*c,{timeToWait:u,timeToScale:g,decision:f,breakevenPoint:b}=(0,s.useMemo)(()=>{const t=e+i/2;return{timeToWait:i,timeToScale:t,decision:i>t?"SCALE NOW":"WAIT",breakevenPoint:2*e}},[i,e]),p=`M ${h(0)} ${x(0)} L ${h(m)} ${x(m)}`,y=`M ${h(0)} ${x(e)} L ${h(m)} ${x(e+10)}`;return(0,a.jsx)("div",{className:"w-full bg-gradient-to-br from-gray-50 via-indigo-50 to-blue-50 p-4 md:p-8",children:(0,a.jsx)("div",{className:"relative max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"backdrop-blur-xl bg-white bg-opacity-40 rounded-3xl border border-white border-opacity-30 shadow-2xl p-4 md:p-8 mb-6 md:mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-4xl font-bold text-gray-800 mb-2 text-center",children:"The GPU Scaling Decision"}),(0,a.jsx)("p",{className:"text-center text-gray-600 mb-8",children:"When is a cold start worth the cost?"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 px-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"cold-start-slider",className:"block text-sm font-medium text-gray-700",children:["GPU Cold Start Time: ",(0,a.jsxs)("span",{className:"font-bold text-indigo-600",children:[e," min"]})]}),(0,a.jsx)("input",{id:"cold-start-slider",type:"range",min:"2",max:"5",step:"0.5",value:e,onChange:e=>t(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"queue-length-slider",className:"block text-sm font-medium text-gray-700",children:["Queued Work: ",(0,a.jsxs)("span",{className:"font-bold text-teal-600",children:[i," video-minutes"]})]}),(0,a.jsx)("input",{id:"queue-length-slider",type:"range",min:"0",max:m,step:"1",value:i,onChange:e=>r(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-teal-600"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"relative z-10 flex-shrink-0",children:(0,a.jsxs)("svg",{width:520,height:n,viewBox:"0 0 520 300",className:"min-w-[520px] md:min-w-0",children:[[0,5,10,15,20].map(e=>(0,a.jsx)("line",{x1:h(e),y1:l,x2:h(e),y2:l+c,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"2 2"},`v-grid-${e}`)),[0,5,10,15,20].map(e=>(0,a.jsx)("line",{x1:o,y1:x(e),x2:o+d,y2:x(e),stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"2 2"},`h-grid-${e}`)),(0,a.jsx)("line",{x1:o,y1:l+c,x2:o+d,y2:l+c,stroke:"#6b7280",strokeWidth:"2"}),(0,a.jsx)("line",{x1:o,y1:l,x2:o,y2:l+c,stroke:"#6b7280",strokeWidth:"2"}),[0,5,10,15,20].map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:h(e),y1:l+c,x2:h(e),y2:l+c+5,stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsx)("text",{x:h(e),y:l+c+18,textAnchor:"middle",className:"text-xs fill-gray-600 font-medium",children:e})]},`x-tick-${e}`)),[0,5,10,15,20].map(e=>(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:o-5,y1:x(e),x2:o,y2:x(e),stroke:"#6b7280",strokeWidth:"1"}),(0,a.jsx)("text",{x:o-10,y:x(e)+4,textAnchor:"end",className:"text-xs fill-gray-600 font-medium",children:e})]},`y-tick-${e}`)),(0,a.jsx)("line",{x1:h(b),y1:l,x2:h(b),y2:l+c,stroke:"#1e40af",strokeWidth:"2",strokeDasharray:"5 5"}),(0,a.jsx)("path",{d:p,stroke:"#f59e0b",strokeWidth:"3",fill:"none",strokeDasharray:"6 4"}),(0,a.jsx)("path",{d:y,stroke:"#14b8a6",strokeWidth:"3",fill:"none"}),(0,a.jsx)("circle",{cx:h(b),cy:x(b),r:"6",fill:"#1e40af",stroke:"white",strokeWidth:"2"}),(0,a.jsx)("text",{x:h(b),y:x(b)-12,textAnchor:"middle",className:"text-xs font-bold fill-blue-800",children:"Breakeven"}),(0,a.jsx)("text",{x:h(b),y:x(b)+20,textAnchor:"middle",className:"text-xs font-bold fill-blue-800",children:b.toFixed(1)}),(0,a.jsx)("line",{x1:h(i),y1:l,x2:h(i),y2:l+c,stroke:"#4f46e5",strokeWidth:"2",strokeDasharray:"3 3"}),(0,a.jsx)("circle",{cx:h(i),cy:x(u),r:"5",fill:"#f59e0b",stroke:"white",strokeWidth:"2"}),(0,a.jsx)("circle",{cx:h(i),cy:x(g),r:"5",fill:"#14b8a6",stroke:"white",strokeWidth:"2"}),(0,a.jsx)("text",{x:h(i),y:l-8,textAnchor:"middle",className:"text-xs font-bold fill-indigo-700",children:i}),(0,a.jsx)("text",{x:o+d/2,y:290,textAnchor:"middle",className:"text-sm font-medium fill-gray-600",children:"Video-Minutes in Queue"}),(0,a.jsx)("text",{x:o-45,y:l+c/2,textAnchor:"middle",transform:`rotate(-90 ${o-45} ${l+c/2})`,className:"text-sm font-medium fill-gray-600",children:"Time to Complete (min)"})]})})}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto w-full",children:(0,a.jsxs)("div",{className:"p-6 bg-white/60 rounded-2xl border border-white/30 shadow-lg backdrop-blur-sm",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-6 text-center",children:"Calculated Outcome"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-amber-100/70 rounded-xl border border-amber-200/50",children:[(0,a.jsx)("span",{className:"font-medium text-amber-800 text-lg",children:"Time if you WAIT:"}),(0,a.jsxs)("span",{className:"font-bold text-2xl text-amber-900",children:[u.toFixed(1)," min"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-teal-100/70 rounded-xl border border-teal-200/50",children:[(0,a.jsx)("span",{className:"font-medium text-teal-800 text-lg",children:"Time if you SCALE:"}),(0,a.jsxs)("span",{className:"font-bold text-2xl text-teal-900",children:[g.toFixed(1)," min"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-center",children:[(0,a.jsx)("div",{className:"flex justify-center lg:justify-start",children:(0,a.jsx)("div",{className:"px-8 py-4 rounded-xl text-center shadow-md min-w-[200px] "+("WAIT"===f?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gradient-to-r from-teal-500 to-teal-600"),children:(0,a.jsx)("span",{className:"text-white font-bold text-2xl tracking-wider drop-shadow-sm",children:f})})}),(0,a.jsxs)("div",{className:"text-center lg:text-left",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700 flex items-center justify-center lg:justify-start gap-2 mb-3",children:"\ud83d\udca1 Key Insight:"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 leading-relaxed mb-3",children:["It only makes sense to provision a new GPU when the queue length is more than ",(0,a.jsx)("b",{className:"text-indigo-700",children:"twice the cold start time"}),"."]}),(0,a.jsx)("div",{className:"inline-block p-3 bg-indigo-50/70 rounded-lg border border-indigo-200/50",children:(0,a.jsxs)("p",{className:"font-bold text-lg text-indigo-800",children:["Breakeven at ",b.toFixed(1)," video-minutes"]})})]})]})]})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-4 bg-white/60 rounded-xl border border-white/30 shadow-md backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-amber-500 rounded border-2 border-amber-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Wait (Don't Scale)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-teal-500 rounded border-2 border-teal-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Scale Now"})]})]})})})]})]})})})}},8151:e=>{e.exports=JSON.parse('{"permalink":"/ml-infra-for-the-gpu-poor","source":"@site/blog/2025-07-31-gpu-poor.mdx","title":"ML Infra design for the GPU Poor","description":"ML Infra design for the GPU Poor","date":"2025-07-31T00:00:00.000Z","tags":[{"inline":true,"label":"infra","permalink":"/tags/infra"}],"readingTime":4.22,"hasTruncateMarker":true,"authors":[],"frontMatter":{"slug":"ml-infra-for-the-gpu-poor","title":"ML Infra design for the GPU Poor","description":"ML Infra design for the GPU Poor","date":"2025-07-31T00:00:00.000Z","tags":["infra"],"draft":false},"unlisted":false,"prevItem":{"title":"Video Rendering Pipeline for an AI-Driven Text-to-Video Platform","permalink":"/video-rendering-pipeline-for-an-ai-driven-text-to-video-platform"},"nextItem":{"title":"Strot - The API Scraper","permalink":"/strot-is-a-api-scraper"}}')},8453:(e,t,i)=>{i.d(t,{R:()=>n,x:()=>l});var s=i(6540);const a={},r=s.createContext(a);function n(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);